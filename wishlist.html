<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DimDesk Studios - My Wishlist</title>
    <link rel="stylesheet" href="styleSheet.css">
    <link rel="icon" type="image/ico" href="Icon.ico">
    <style>
        /* Additional inline styles for wishlist page */
        .wishlist-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .wishlist-actions {
            display: flex;
            gap: 1rem;
        }
        
        .wishlist-clear-btn {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
            border: 2px solid #dc3545;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .wishlist-clear-btn:hover {
            background: rgba(220, 53, 69, 0.4);
            transform: translateY(-2px);
        }
        
        .wishlist-shop-btn {
            background: rgba(240, 128, 128, 0.2);
            color: lightcoral;
            border: 2px solid lightcoral;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .wishlist-shop-btn:hover {
            background: rgba(240, 128, 128, 0.4);
            transform: translateY(-2px);
        }
        
        .wishlist-filter {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .wishlist-filter-btn {
            background: rgba(255, 255, 255, 0.1);
            color: wheat;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .wishlist-filter-btn.active {
            background: lightcoral;
            color: #000;
            border-color: lightcoral;
        }
        
        .wishlist-filter-btn:hover {
            background: rgba(240, 128, 128, 0.2);
        }
        
        .wishlist-no-items {
            text-align: center;
            padding: 3rem;
            background: rgba(20, 20, 20, 0.8);
            border-radius: 15px;
            border: 2px dashed rgba(240, 128, 128, 0.3);
        }
        
        .wishlist-no-items h3 {
            color: lightcoral;
            margin-bottom: 1rem;
        }
        
        .wishlist-no-items p {
            color: wheat;
            margin-bottom: 1.5rem;
        }
    </style>
</head>
<body class="wishlist-page">
    <!-- Background Video -->
    <div class="background-video">
        <video autoplay muted loop playsinline id="bg-video">
            <source src="D.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div class="video-overlay"></div>
    </div>

    <div class="wishlist-container">
        <!-- Header -->
        <header>
            <div class="HE">
                <div class="lol">
                    <a href="index.html" title="Return to Home" id="logo-link">
                        <h1 style="color:lightcoral">
                            <img alt="DimDesk Studios Cat Logo" src="cat.png" width="90" id="cat-logo" 
                                 onerror="this.style.display='none'; document.getElementById('logo-fallback').style.display='block';" />
                            <span id="logo-fallback" class="logo-fallback" style="display:none;">DIMDESK</span>
                        </h1>
                    </a>
                </div>
                
                <nav class="nav-links">
                    <ul>
                        <li><a href="index.html" id="home-link">Home</a></li>
                        <li><a href="portfolio.html" id="portfolio-link">Portfolio</a></li>
                        <li><a href="shop.html" id="shop-link">Shop</a></li>
                        <li class="wishlist-nav-item">
                            <a href="wishlist.html" id="wishlist-link" class="current-page">‚ù§Ô∏è Wishlist 
                                <span class="wishlist-badge" id="wishlist-badge">0</span>
                            </a>
                        </li>
                        <li class="cart-toggle">
                            <a href="#" class="cart-icon" title="View Cart">
                                üõí
                                <span class="cart-count" id="cart-count">0</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                
                <button class="mobile-toggle" aria-label="Toggle navigation menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </header>

        <!-- Wishlist Header -->
        <div class="wishlist-header">
            <h1>My Wishlist</h1>
            <p class="wishlist-subtitle">Track items you're interested in and get notified when they're available!</p>
            
            <!-- Stats -->
            <div class="wishlist-stats">
                <div class="stat-card">
                    <div class="stat-number" id="wishlist-count">0</div>
                    <div class="stat-label">Total Items</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="available-count">0</div>
                    <div class="stat-label">Available Now</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="upcoming-count">0</div>
                    <div class="stat-label">Coming Soon</div>
                </div>
            </div>
        </div>

        <!-- Controls -->
        <div class="wishlist-controls">
            <div class="wishlist-filter">
                <button class="wishlist-filter-btn active" onclick="filterWishlist('all')">All Items</button>
                <button class="wishlist-filter-btn" onclick="filterWishlist('available')">Available</button>
                <button class="wishlist-filter-btn" onclick="filterWishlist('upcoming')">Coming Soon</button>
                <button class="wishlist-filter-btn" onclick="filterWishlist('has-links')">Has External Links</button>
            </div>
            
            <div class="wishlist-actions">
                <button class="wishlist-clear-btn" onclick="clearWishlist()">
                    üóëÔ∏è Clear All
                </button>
                <a href="shop.html" class="wishlist-shop-btn">
                    üõçÔ∏è Browse Shop
                </a>
            </div>
        </div>

        <!-- Wishlist Items Grid -->
        <div class="wishlist-grid" id="wishlist-grid">
            <!-- Dynamic content will be loaded here -->
        </div>

        <!-- Empty State -->
        <div class="wishlist-no-items" id="empty-wishlist" style="display: none;">
            <div class="empty-wishlist-icon">üìã</div>
            <h3>Your wishlist is empty</h3>
            <p>Browse our collection and add items you're interested in to track them here!</p>
            <a href="shop.html" class="browse-shop-btn">Browse Shop</a>
        </div>

        <!-- Tips Section -->
        <div style="margin-top: 4rem; padding: 2rem; background: rgba(20, 20, 20, 0.8); border-radius: 15px; border: 2px solid rgba(240, 128, 128, 0.2);">
            <h3 style="color: lightcoral; margin-bottom: 1rem;">üí° Wishlist Tips</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                <div style="color: wheat;">
                    <strong>‚ù§Ô∏è Add Items</strong>
                    <p>Click the wishlist button (ü§ç) on any product to add it here</p>
                </div>
                <div style="color: wheat;">
                    <strong>üîó External Links</strong>
                    <p>Items with platform icons have external store links</p>
                </div>
                <div style="color: wheat;">
                    <strong>üõí Quick Add</strong>
                    <p>Click "Add to Cart" on available items for quick purchase</p>
                </div>
                <div style="color: wheat;">
                    <strong>üì± Access Anywhere</strong>
                    <p>Your wishlist is saved locally and works across all pages</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cart-sidebar">
        <div class="cart-header">
            <h2>Your Cart</h2>
            <button class="close-cart" id="close-cart">&times;</button>
        </div>
        <div class="cart-items" id="cart-items">
            <div class="empty-cart">Your cart is empty</div>
        </div>
        <div class="cart-total">
            <span class="cart-total-label">Total:</span>
            <span class="cart-total-price" id="cart-total">$0.00</span>
        </div>
        <div class="cart-actions">
            <button class="cart-btn cart-btn-checkout" id="checkout-btn">Checkout</button>
            <button class="cart-btn cart-btn-clear" id="clear-cart">Clear Cart</button>
        </div>
    </div>

    <!-- Item Modal -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" id="modal-close">&times;</button>
            <div class="modal-body" id="modal-body"></div>
        </div>
    </div>

    <footer style="background-color: black">
        <div class="footerContainer">
            <div class="socialIcons">
                <a href="https://bsky.app/profile/fubiem.bsky.social" target="_blank" rel="noopener noreferrer" aria-label="Bluesky">
                    <img alt="Bluesky" src="bluesky-fillW.png" width="30" height="30" onerror="this.style.display='none'" />
                </a>
                <a href="https://www.youtube.com/@fubiereal" target="_blank" rel="noopener noreferrer" aria-label="YouTube">
                    <img alt="YouTube" src="youtube-fillW.png" width="30" height="30" onerror="this.style.display='none'" />
                </a>
                <a href="https://www.patreon.com/c/DIMDESK" target="_blank" rel="noopener noreferrer" aria-label="Patreon">
                    <img alt="Patreon" src="pathronW.png" width="30" height="30" onerror="this.style.display='none'" />
                </a>
                <a href="https://dimdesk.itch.io" target="_blank" rel="noopener noreferrer" aria-label="Itch.io">
                    <img alt="Itch.io" src="itchioW.png" width="30" height="30" onerror="this.style.display='none'" />
                </a>
                <a href="https://cara.app/fubie/all" target="_blank" rel="noopener noreferrer" aria-label="Cara">
                    <img alt="Cara" src="caraW.png" width="30" height="30" onerror="this.style.display='none'" />
                </a>
            </div>
        </div>
        <div class="Oo">
            <p style="color: #D8A790; display: inline-block;">contact us:</p>
            <a style="color: #D8A790" href="mailto:dimdesk.contact@gmail.com">dimdesk.Contact@gmail.com</a>
            <div class="footerBottom">
                <p style="color:moccasin">Copyright &copy;2025; <span class="designer">DimDesk.Studios</span></p>
            </div>
            <!-- Admin Access in Footer -->
            <div class="admin-footer-access">
                <a href="admin.html" title="Admin Panel">
                    <span>‚öôÔ∏è</span>
                    <span>Admin Access</span>
                </a>
            </div>
        </div>
    </footer>

    <script src="main.js"></script>
    <script>
        // Wishlist page specific functions
        let currentFilter = 'all';
        
        function filterWishlist(filter) {
            currentFilter = filter;
            
            // Update filter buttons
            document.querySelectorAll('.wishlist-filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Reload wishlist with filter
            loadWishlistContent();
        }
        
        function updateWishlistBadge() {
            const badge = document.getElementById('wishlist-badge');
            if (badge && wishlist) {
                badge.textContent = wishlist.length;
                badge.style.display = wishlist.length > 0 ? 'flex' : 'none';
            }
        }
        
        function loadWishlistContent() {
            const emptyWishlist = document.getElementById('empty-wishlist');
            const wishlistGrid = document.getElementById('wishlist-grid');
            
            if (!wishlist || wishlist.length === 0) {
                if (emptyWishlist) emptyWishlist.style.display = 'block';
                if (wishlistGrid) {
                    wishlistGrid.innerHTML = '';
                    wishlistGrid.style.display = 'none';
                }
                updateWishlistStats();
                updateWishlistBadge();
                return;
            }
            
            // Apply filter
            let filteredItems = wishlist;
            if (currentFilter === 'available') {
                filteredItems = wishlist.filter(item => item.status === 'released');
            } else if (currentFilter === 'upcoming') {
                filteredItems = wishlist.filter(item => item.status === 'upcoming');
            } else if (currentFilter === 'has-links') {
                filteredItems = wishlist.filter(item => item.externalLinks && Object.keys(item.externalLinks).length > 0);
            }
            
            if (filteredItems.length === 0) {
                if (emptyWishlist) {
                    emptyWishlist.innerHTML = `
                        <div class="empty-wishlist-icon">üîç</div>
                        <h3>No items match your filter</h3>
                        <p>Try changing your filter to see more items</p>
                        <button class="browse-shop-btn" onclick="filterWishlist('all')">Show All Items</button>
                    `;
                    emptyWishlist.style.display = 'block';
                }
                if (wishlistGrid) {
                    wishlistGrid.innerHTML = '';
                    wishlistGrid.style.display = 'none';
                }
                return;
            }
            
            if (emptyWishlist) emptyWishlist.style.display = 'none';
            if (wishlistGrid) {
                wishlistGrid.innerHTML = '';
                wishlistGrid.style.display = 'grid';
                
                filteredItems.forEach((item) => {
                    const isAvailable = item.status === 'released';
                    
                    const wishlistItem = document.createElement('div');
                    wishlistItem.className = 'wishlist-item';
                    wishlistItem.innerHTML = `
                        <div class="wishlist-item-header">
                            <img src="${item.image}" alt="${item.title}" class="wishlist-item-image" loading="lazy">
                            <span class="wishlist-status status-${item.status}">
                                ${isAvailable ? 'Available Now' : 'Coming Soon'}
                            </span>
                        </div>
                        <div class="wishlist-item-content">
                            <h3 class="wishlist-item-title">${item.title}</h3>
                            <p class="wishlist-item-description">${item.description || 'No description available.'}</p>
                            <div class="wishlist-item-price">$${item.price.toFixed(2)}</div>
                            ${item.externalLinks ? renderWishlistExternalLinks(item.externalLinks) : ''}
                            <div class="wishlist-item-actions">
                                <button class="wishlist-btn-remove" onclick="removeFromWishlist(${item.id})">
                                    ‚ùå Remove
                                </button>
                                ${isAvailable ? `
                                    <button class="wishlist-btn-cart" onclick="addToCartFromWishlist(${item.id})">
                                        üõí Add to Cart
                                    </button>
                                ` : `
                                    <button class="wishlist-btn-cart" disabled>
                                        ‚è≥ Coming Soon
                                    </button>
                                `}
                            </div>
                        </div>
                    `;
                    
                    wishlistGrid.appendChild(wishlistItem);
                });
                
                updateWishlistStats();
                updateWishlistBadge();
            }
        }
        
        function renderWishlistExternalLinks(links) {
            if (!links || Object.keys(links).length === 0) return '';
            
            let html = '<div class="wishlist-external-links">';
            for (const [platform, url] of Object.entries(links)) {
                const icon = getPlatformIcon(platform);
                html += `
                    <a href="${url}" target="_blank" rel="noopener noreferrer" class="wishlist-external-link" title="Buy on ${platform}">
                        ${icon} ${platform}
                    </a>
                `;
            }
            html += '</div>';
            return html;
        }
        
        function getPlatformIcon(platform) {
            const icons = {
                'steam': 'üéÆ',
                'itch.io': 'üéØ',
                'gog': 'üìÄ',
                'epic': 'üè™',
                'humble': 'üéÅ',
                'direct': 'üåê',
                'amazon': 'üì¶',
                'playstation': 'üéÆ',
                'xbox': 'üü©',
                'nintendo': 'üî¥',
                'bandcamp': 'üéµ',
                'spotify': 'üéµ',
                'apple music': 'üéµ'
            };
            return icons[platform.toLowerCase()] || 'üîó';
        }
        
        // Initialize wishlist page
        document.addEventListener('DOMContentLoaded', function() {
            loadWishlistContent();
            initNavigation();
            initCartSystem();
            initModalSystem();
            updateCartCount();
            updateWishlistBadge();
        });
    </script>
</body>
</html>
